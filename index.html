<!DOCTYPE html>

<!--
AI Usage: Approximately 20% of this code was developed with assistance from Claude AI (Anthropic)
for Azure deployment configuration, CORS troubleshooting, and client-server communication.
-->
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Dice Roller - Client</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			max-width: 600px;
			margin: 50px auto;
			padding: 20px;
			background-color: #f0f0f0;
		}

		.container {
			background-color: white;
			padding: 30px;
			border-radius: 10px;
			box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
		}

		h1 {
			color: #333;
			text-align: center;
		}

		.server-config {
			margin: 20px 0;
			padding: 15px;
			background-color: #f9f9f9;
			border-radius: 5px;
		}

		label {
			display: block;
			margin-bottom: 5px;
			font-weight: bold;
		}

		input[type="text"] {
			width: 100%;
			padding: 8px;
			margin-bottom: 10px;
			border: 1px solid #ddd;
			border-radius: 4px;
			box-sizing: border-box;
		}

		button {
			background-color: #4CAF50;
			color: white;
			padding: 12px 24px;
			border: none;
			border-radius: 4px;
			cursor: pointer;
			font-size: 16px;
			margin: 5px;
		}

		button:hover {
			background-color: #45a049;
		}

		button:disabled {
			background-color: #cccccc;
			cursor: not-allowed;
		}

		.dice-controls {
			text-align: center;
			margin: 20px 0;
		}

		.result {
			margin-top: 20px;
			padding: 20px;
			background-color: #e8f5e9;
			border-radius: 5px;
			text-align: center;
		}

		.result h2 {
			margin: 0 0 10px 0;
			color: #2e7d32;
		}

		.dice-display {
			font-size: 48px;
			margin: 10px 0;
		}

		.error {
			color: #d32f2f;
			background-color: #ffebee;
			padding: 10px;
			border-radius: 4px;
			margin-top: 10px;
		}

		.success {
			color: #388e3c;
			background-color: #e8f5e9;
			padding: 10px;
			border-radius: 4px;
			margin-top: 10px;
		}
	</style>
</head>

<body>
	<div class="container">
		<h1>üé≤ Dice Roller üé≤</h1>

		<div class="server-config">
			<label for="serverUrl">Server URL:</label>
			<input type="text" id="serverUrl"
				placeholder="Enter your Node.js server URL (e.g., https://your-server.azurewebsites.net)" value="">
			<button onclick="testConnection()">Test Server Connection</button>
			<div id="connectionStatus"></div>
		</div>

		<div class="dice-controls">
			<h3>Roll the Dice!</h3>
			<button onclick="rollDice(1)">Roll 1 Die üé≤</button>
			<button onclick="rollDice(2)">Roll 2 Dice üé≤üé≤</button>
			<button onclick="rollDice(3)">Roll 3 Dice üé≤üé≤üé≤</button>
		</div>

		<div id="result" style="display: none;" class="result">
			<h2>Result:</h2>
			<div id="diceDisplay" class="dice-display"></div>
			<div id="total"></div>
		</div>
	</div>

	<script>
		// Get the dice emoji for a number
		function getDiceEmoji(num) {
			const diceEmojis = ['‚öÄ', '‚öÅ', '‚öÇ', '‚öÉ', '‚öÑ', '‚öÖ'];
			return diceEmojis[num - 1] || 'üé≤';
		}

		// Test server connection
		async function testConnection() {
			const serverUrl = document.getElementById('serverUrl').value.trim();
			const statusDiv = document.getElementById('connectionStatus');

			if (!serverUrl) {
				statusDiv.innerHTML = '<div class="error">Please enter a server URL</div>';
				return;
			}

			try {
				statusDiv.innerHTML = '<div>Testing connection...</div>';
				const response = await fetch(`${serverUrl}`);

				if (response.ok) {
					const result = await response.text();
					statusDiv.innerHTML = `<div class="success">‚úì Connected! Server returned: ${result}</div>`;
				} else {
					statusDiv.innerHTML = `<div class="error">‚úó Server responded with status: ${response.status}</div>`;
				}
			} catch (error) {
				statusDiv.innerHTML = `<div class="error">‚úó Connection failed: ${error.message}</div>`;
			}
		}

		// Roll dice
		async function rollDice(numDice) {
			const serverUrl = document.getElementById('serverUrl').value.trim();
			const resultDiv = document.getElementById('result');
			const diceDisplay = document.getElementById('diceDisplay');
			const totalDiv = document.getElementById('total');

			if (!serverUrl) {
				alert('Please enter a server URL first!');
				return;
			}

			try {
				// Call server API for each die
				const rolls = [];
				for (let i = 0; i < numDice; i++) {
					const response = await fetch(`${serverUrl}`);
					if (!response.ok) {
						throw new Error(`Server error: ${response.status}`);
					}
					const result = await response.text();
					rolls.push(parseInt(result));
				}

				// Display results
				const diceEmojis = rolls.map(roll => getDiceEmoji(roll)).join(' ');
				const total = rolls.reduce((sum, roll) => sum + roll, 0);

				diceDisplay.textContent = diceEmojis;
				totalDiv.innerHTML = `<strong>Rolls:</strong> ${rolls.join(', ')} | <strong>Total:</strong> ${total}`;
				resultDiv.style.display = 'block';

			} catch (error) {
				alert(`Error rolling dice: ${error.message}\n\nMake sure your server is running and the URL is correct.`);
			}
		}
	</script>
</body>

</html>